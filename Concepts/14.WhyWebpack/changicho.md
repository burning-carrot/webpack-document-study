# Why webpack

번들러가 사용되기 전에 어떻게 자바스크립트를 사용했었는지 요약한다.

이를 통해 webpack을 사용할 때의 장점을 알아본다.

브라우저에서 Javascript가 동작하는 두 가지 방법이 있었다.

- 각 기능이 있는 스크립트를 추가 : 너무 많은 스크립트로 네트워크 병목을 일으킬 수 있었음
- 모든 프로젝트에 하나의 거대한 `.js` 파일을 만들어 사용 : 유효범위, 크기, 가독성, 유지보수에 문제가 발생

## IIFEs - Immediately invoked function expressions

IIFE는 즉시실행 함수를 의미하며, 대규모 프로젝트에서 유효범위 문제를 해결한다.

스크립트 파일을 IIFE로 감싸면 유효범위에 대한 걱정 없이 파일을 안전하게 연결하거나 결합 할 수 있다.

IIFE의 사용은 Make, Gulp, Grunt, Broccoli, Brunch와 같은 툴과 연관이 있으며, 이 툴들은 태스크 러너라고 하며 모든 프로젝트 파일들을 함께 연결하는 작업을 수행한다.

그러나 하나의 파일을 변경해도 전체를 다시 빌드해야 한다.
태스크 러너는 연결 파일 간의 스크립트를 쉽게 재사용 할 수 있지만, 빌드 최적화를 더욱더 어렵게 한다. (코드가 실제로 사용되고 있는지 파악하기 어려움)

ex) lodash에서 하나의 함수만 사용해도, 전체 라이브러리를 추가하고 모든 것을 뭉쳐야 한다.

코드의 의존성을 어떻게 treeshaking 해야할까? 지연 로딩 청크 코드는 확장이 어렵고 개발자의 많은 수동 작업을 필요로 한다.

## Birth of JavaScript Modules happened thanks to Node.js

Webpack은 브라우저 외부 환경의 서버나 컴퓨터에서 사용할 수 있는 JavaScript 런타임인 Node.js에서 동작한다.

현재 JavaScript는 브라우저에서 동작하지 않는데 어떻게 Node 애플리케이션은 새로운 코드 청크를 불러올까?

require를 도입한 CommonJS가 출시되었는데 이는 현재 파일에서 모듈을 불러오고 사용할 수 있도록 만들었다.

이것은 필요한 곳에 모듈을 가져와 별도의 구성 없이 바로 사용할 수 있도록 하여 유효범위 문제를 해결했다.

## npm + Node.js + modules – mass distribution

그러나 CommonJS에 대한 브라우저의 지원은 없다. 라이브 바인딩 또한 마찬가지이다.

순환 참조의 문제가 있으며, 동기적인 모듈 해석과 로딩이 느리다.

CommonJS가 Node.js 프로젝트에서는 뛰어난 솔루션이었지만 브라우저는 모듈을 지원하지 않았다.

때문에 브라우저에서 CommonJS의 실행을 가능하게 하는 Browserify와 RequireJS, SystemJS 같은 번들러와 툴들이 만들어졌다.

## ESM - ECMAScript Modules

웹 프로젝트에서 좋은 소식은 모듈이 ECMAScript 표준에서 공식 기능이 되고 있다는 것이다.

그러나 브라우저 지원은 불완전하고, 번들링이 여전히 더 빠르기 때문에 현재 초기 구현 모듈보다 권장되고 있다.

## Automatic Dependency Collection

구식의 태스크 러너와 Google Closure Compiler 조차 모든 의존성을 미리 수동으로 선언해야 한다.

webpack같은 번들러는 자동으로 빌드하고, 가져오거나 내보낸 항목을 기반으로 디펜던시 그래프를 추론한다.

이는 다른 플러그인과 로더와 함께 훌륭한 개발자 경험을 제공한다.

## Wouldn't it be nice…

- 모듈을 작성할 수도 있고
- 어떠한 포맷의 모듈(적어도 ESM에 도달하기 전까지)도 지원하며
- 리소스와 애셋을 동시에 처리 가능하다.

이것이 webpack이 존재하는 이유다.

JavaScript 애플리케이션을 번들로 묶을 수 있는(ESM과 CommonJS 모두 지원) 도구이며, 이미지나 폰트, 스타일 시트 같은 다양한 애셋을 지원하도록 확장할 수 있다.

Webpack은 성능과 로딩 시간을 중요하게 생각합니다. 프로젝트나 사용자에게 최고의 경험을 제공하기 위해 항상 비동기 청크 로딩이나 프리패칭 같은 새로운 기능을 추가하거나 개선하고 있다.
